#网络

[前端词典】进阶必备的网络基础（上](https://juejin.im/post/5c591fda6fb9a049dc02b1cc) 

###学网络必看韩立刚，B站

#常见的#HTTP协议状态码：
###1xx 请求正在处理

###2×× : 请求成功，请求被成功处理 
200 ok
###3×× : 重定向，要完成请求必须进行进一步处理 
301 : 永久性转移 永久搬家

302 ：暂时性转移 暂时搬家

304 ： 协商缓存   文档的内容（自上次访问以来或者根据请求的条件）没有改变，则服务器应当返回这个状态码。

浏览器第二次请求时就会与服务器进行协商，询问浏览器中的缓存资源是不是旧版本，需不需要更新，此时，服务器就会做出判断，如果缓存和服务端资源的最新版本是一致的，那么就无需再次下载该资源，服务端直接返回304 Not Modified 状态码，如果服务器发现浏览器中的缓存已经是旧版本了，那么服务器就会把最新资源的完整内容返回给浏览器，状态码就是200 Ok，那么服务端是根据什么来判断浏览器的缓存是不是最新的呢？其实是根据HTTP的另外两组头信息，分别是：Last-Modified/If-Modified-Since 与 ETag/If-None-Match。

###4×× : 客户端错误，请求不合法 
400：Bad Request,请求有语法问题 
401：没有权限，身份认证失败（WWW-Authenticate）

403：服务器已经理解请求，但是拒绝执行它。 

404：客户端所访问的页面不存在

###5×× : 服务器端错误，服务器不能处理合法请求 
500 ：服务器内部错误 

503 ： 服务不可用，稍等 


#HTTP/1.0和HTTP/1.1对比

1.HTTP1.0，它是短暂连接，浏览器每次请求都需要和服务器建立一个TCP连接，服务器完成请求处理后理解断开TCP连接。HTTP1.1，为了克服短连接的缺陷，HTTP1.1支持久连接，默认持久连接（HTTP1.1的默认模式是使用带流水线的持久连接），在一个TCP
连接上可以传送多个HTTP请求和响应（流水线），减少了建立和关闭连接的消耗和延迟。HTTP 1.1还允许客户端不用等待上一次请求结果返回，就可以发出下一次请求.(流水线工作的好处)使用方法，在请求头的
Connection字段设置为Keep-Alive,客户端通知服务器保持持久连接。则服务器保持持久连接，在Connection设置为close时，客户端通知服务器返回本次结果后关闭连接。

2.在请求方法上，HTTP1.1增加了options，put,delete,connect等。HTTP1.0版本则只有get/post

3.在1.0版本中，只有16个状态码，对错误和警告描述是不够具体的，在HTTP1.1版本中，首先在头信息中引入了一个warning域，增加了对错误和警告信息的描述。而且状态码新增了24个，如410表示服务器的资源被永久删除了。

4、Host域： HTTP1.1在Request消息头里头多了一个Host域，在HTTP1.0版本中，我们认为一个同一个ip和端口只能对应一个web站点。
HTTP 1.1中增加Host请求头字段后，WEB浏览器可以使用主机头名来明确表示要访问服务器上的哪个WEB站点，这才实现了在一台WEB服务器上可以在同一个IP地址和端口号上使用不同的主机名来创建多个虚拟WEB站点

       GET /pub/WWW/TheProject.html HTTP/1.1

       Host: www.w3.org

       HTTP1.0则没有这个域。
       
##ARP协议


###建立TCP连接与ARP的关系
应用接受用户提交的数据，触发TCP建立连接，TCP的第一个SYN报文通过connect函数到达IP层，IP层通过查询路由表：

###如果目的IP和自己在同一个网段

__当IP层的ARP高速缓存表中存在目的IP对应的MAC地址时,__ 则调用网络接口send函数（参数为IP Packet和目的MAC））将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC的封装，并发送出去；

__当IP层的ARP高速缓存表中不存在目的IP对应的MAC地址时，__ 则IP层将TCP的SYN缓存下来，发送ARP广播请求目的IP的MAC，收到ARP应答之后，将应答之中的<IP地址，对应的MAC>对缓存在本地ARP高速缓存表中，然后完成TCP SYN的IP封装，调用网络接口send函数（参数为IP Packet和目的MAC））将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC的封装，并发送出去；。

###如果目的IP地址和自己不在同一个网段  就需要将包发送给默认网关，这需要知道默认网关的MAC地址：

__当IP层的ARP高速缓存表中存在默认网关对应的MAC地址时__ 则调用网络接口send函数（参数为IP Packet和默认网关的MAC）将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC

__当IP层的ARP高速缓存表中不存在默认网关对应的MAC地址时，__ 则IP层将TCP的SYN缓存下来，发送ARP广播请求默认网关的MAC，收到ARP应答之后，将应答之中的<默认网关地址，对应的MAC>对缓存在本地ARP高速缓存表中，然后完成TCP SYN的IP封装，调用网络接口send函数（参数为IP Packet和默认网关的MAC）将数据提交给网络接口，网络接口完成Ethernet Header + IP + CRC的封装，并发送出去。


